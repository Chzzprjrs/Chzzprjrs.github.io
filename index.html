<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"
	/>
	<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
	<title>https的test</title>
  <!-- 同步载入 -->
	<script charset='UTF-8' src="sensor.js"></script>
	<script charset="UTF-8">
		var sensors = window['sensorsDataAnalytic201505'];
		sensors.init({
				// sdk_url: 'https://cdn.jsdelivr.net/npm/sa-sdk-javascript@1.15.11/sensorsdata.min.js',
				name: 'sensors',
				server_url: 'https://jssdkdata.debugbox.sensorsdata.cn/sa?project=beiyong3',
				is_track_single_page:true,
			
				heatmap: {
			//是否开启点击图，default 表示开启，自动采集 $WebClick 事件，可以设置 'not_collect' 表示关闭。
			clickmap:'default',
			//是否开启触达注意力图，not_collect 表示关闭，不会自动采集 $WebStay 事件，可以设置 'default' 表示开启。
			scroll_notice_map:'default'
		    } ,
				source_channel:['as'],
				preset_properties:{
					url:false,
					latest_traffic_source_type:false,
					latest_utm:true,
					//是否采集 $latest_traffic_source_type 最近一次流量来源类型，默认值 true。
					latest_traffic_source_type:true,
					//是否采集 $latest_search_keyword 最近一次搜索引擎关键字，默认值 true。
					latest_search_keyword:true,
					//是否采集 $latest_referrer 最近一次前向地址，默认值 true。
					latest_referrer:true,
					//是否采集 $latest_referrer_host 最近一次前向地址，1.14.8 以下版本默认是true，1.14.8 及以上版本默认是 false，需要手动设置为 true 开启。
					latest_referrer_host:false,
					//是否采集 $latest_landing_page 最近一次落地页地址，默认值 false。
	        latest_landing_page:false,
				},
				//send_type:'image',
				// batch_send:true,
				// batch_send:{
				// 	datasend_timeout: 6000, //一次请求超过多少秒的话自动取消，防止请求无响应。
				// 	send_interval: 6000, //间隔几秒发一次数据。
				// 	one_send_max_length: 6 //一次请求最大发送几条数据，防止数据太大
				//},
				// debug_mode:true,
				//show_log:false
			});
			sensors.login("wangyue000")
			sensors.use('SiteLinker',
				{linker: [
					{part_url: 'wy.com', after_hash: false},
					{part_url: 'github.io', after_hash: false}
						
					]}
			)
    sensors.quick('autoTrack',{
			cat:'brandy'
		},function(){
			console.log('lalal')
		});
		sensors.quick('setPlugin', { 
			popup: function(popup) {
						// 初始化popup插件 
						popup.init({
								api_base_url: 'http://10.120.169.63:8107/sf/plans/?project=default',
								popup_listener: {
										onClick: function() {}
								}
						})
				}
		});
		// sensors.quick('isReady',function(){
		// 		// sensors.quick('getAnonymousID');
		// 		console.log(sensors.quick('getAnonymousID'),sensors.getPresetProperties())
		// 	});
	</script>
  <!-- 异步载入 -->
  <!-- <script>
    (function(para) {
      var p = para.sdk_url, n = para.name, w = window, d = document, s = 'script',x = null,y = null;
      if(typeof(w['sensorsDataAnalytic201505']) !== 'undefined') {
          return false;
        }
      w['sensorsDataAnalytic201505'] = n;
      w[n] = w[n] || function(a) {return function() {(w[n]._q = w[n]._q || []).push([a, arguments]);}};
      var ifs = ['track','quick','register','registerPage','registerOnce','clearAllRegister','trackSignup', 'trackAbtest', 'setProfile','setOnceProfile','appendProfile', 'incrementProfile', 'deleteProfile', 'unsetProfile','identify','login','logout','trackLink'];
      for (var i = 0; i < ifs.length; i++) {
        w[n][ifs[i]] = w[n].call(null, ifs[i]);
      }
      if (!w[n]._t) {
        x = d.createElement(s), y = d.getElementsByTagName(s)[0];
        x.async = 1;
        x.src = p;
        x.setAttribute('charset','UTF-8');
        w[n].para = para;
        y.parentNode.insertBefore(x, y);
      }
    })({
      sdk_url: '在 github 下载新版本的 sensorsdata.min.js ',
      name: 'sensors',
      server_url:'数据接收地址',
      is_track_single_page:true, // 单页面配置，默认开启，若页面中有锚点设计，需要将该配置删除，否则触发锚点会多触发 $pageview 事件
      use_client_time:true, 
        send_type:'beacon',
      heatmap: {
        //是否开启点击图，default 表示开启，自动采集 $WebClick 事件，可以设置 'not_collect' 表示关闭。
        clickmap:'default',
        //是否开启触达注意力图，not_collect 表示关闭，不会自动采集 $WebStay 事件，可以设置 'default' 表示开启。
        scroll_notice_map:'not_collect'
      }
    }); 
    sensors.quick('autoTrack');
    </script> -->
	<style>
		html,
		body {
			height: 100%;
			width: 100%;
		}
		
		#wrap {
			height: 100%;
			display: -webkit-box;
			display: -webkit-flex;
			display: flex;
			-webkit-box-orient: vertical;
			-webkit-flex-flow: column;
			flex-flow: column;
		}
		
		.topbar {
			background: #00bf8a;
			height: 50px;
			border-bottom: 1px solid #fff;
			line-height: 50px;
			text-align: center;
			color: #323237;
			margin: 10px;
		}
		
		.headerbar {
			height: 80px;
			line-height: 80px;
			color: #fff;
			font-size: 25px;
			background: #1BB17B;
		}
	</style>
</head>

<body>
	<div id="wrap">
		<header></header>
		<section>
			<div id="track1" class="topbar">
				内嵌标签test：
				<!-- <a href="javascript:;">222
					<button id="btnid">333</button>
				  <span>aaa</span>
				</a>
				<input type="text" value="111" id="input1"/> -->
			</div>
			<div id="track2" class="topbar">
				其他类型元素自动采集：
				<li data-sensors-click style="display: inline-block;">bbb</li>
				<button data-sensors-click>btn</button>
				<li q style="display: inline-block;height: 32px;background-color: antiquewhite;">ccc<span style="background-color: aquamarine;">aa</span></li>
				<p style="display: inline-block;">111<span q1 style="border: 1px solid #eee;">222</span></p>
			</div>
			<div id="aa" class="topbar">
				代码埋点触发元素点击
			</div>
			<div class="topbar" sensors-disable="true" >
				附带属性
			</div>
			<div class="topbar" data="test">
				通过标签特征判断是否增加自定义属性
			</div>
			<div id="set" class="topbar">
				设置用户属性（set）
			</div>
			<div id="login" class="topbar">
				用户关联（login）
			</div>
      <button>btn</button>
			<div style="width: 100px;height: 100px;background-color: aquamarine;"></div>
			<input type="text" name="" id="wya">
		</section>
	</div>
</body>

<script type="text/javascript">
		
		document.getElementById('wya').onclick = function(){
			sensors.quick('trackHeatMap', this, {
				customProp1: 'test1', //如果需要添加自定义属性需要将 SDK 升级到 1.13.7 及以上版本。
				customProp2: 'test2'
			}, function() {
				console.log('callback');
			});
		}
		// document.getElementById("track1").onclick = function () {
		// 	//事件1埋点
		// 	sensors.track('BuyProduct', {
		// 		ProductName: "MacBook Pro", 
		// 		ProductPrice: 123.45, 
		// 		IsAddedToFav: false,
		// 	});

		// }
		document.getElementById("login").onclick = function(){
			//用户关联
			// sensors.login("wangyue")
			sensors.login("wangyue1")


	  	}
		// document.getElementById("track2").onclick = function(){
		// 	//事件2埋点
		// 	sensors.logout()
		// }
		document.getElementById("set").onclick = function(){
			//设置用户属性
			sensors.setProfile({email:'wy@xxx'});
			// sensors.appendProfile({catrgory: ['玉米','白菜']});
			// sensors.appendProfile({catrgory: '玉米'});
			sensors.incrementProfile('navClick');
			sensors.unsetProfile('email');
		}

		
</script>

</html>
